### CAN总线学习笔记 -- CAN基础知识
tips : 参考《CAN入门书》

#### 1、CAN的一些基本概念
##### 1.1、什么是CAN总线？
CAN是Controller Area Network的缩写，是ISO国际标准化的**串行通信协议**。简单的来说，CAN总线就是一种传输数据的线，用于在不同的ECU之间传输数据。
&nbsp;
CAN总线有两个国际ISO国际标准：ISO11898 和 ISO11519： 
+ **ISO11898**定义了通信速率为125kbps~1Mbps的高速CAN通信标准，属于**闭环总线**，传输速率可达1Mbps，CAN总线长度<=40米。
&nbsp;
+ **ISO11519**定义了通信速率为10kbps


##### 1.2 CAN的拓扑结构
下图中，左边是高速CAN总线的拓扑结构，右边是低速CAN总线的拓扑结构。


[![RT5t4f.md.jpg](https://z3.ax1x.com/2021/07/06/RT5t4f.md.jpg)](https://imgtu.com/i/RT5t4f)

   **左边是高速CAN总线的拓扑结构，右边是低速CAN总线的拓扑结构**

如图中所示，CAN总线包括CAN_H 和 CAN_L 两根线。节点通过CAN控制器和CAN收发器连接到CAN总线上。

**Tips ：通常来讲，ECU内部集成了CAN控制器和CAN收发器，但是也有没集成的，需要自己外加。**

#### 1.3 CAN信号表示
在CAN总线上，利用CAN_H和CAN_L两根线上的电位差来表示CAN信号。CAN总线上的电位差分为显性电平和隐性电平。其中显性电平为逻辑0，隐性电平为逻辑1。
ISO11898标准（125kbps ~ 1Mbps）和ISO11519标准（10kbps ~ 125kbps）中CAN信号的表示分别如下所示：


#### 1.4 CAN信号传输
发送过程：
CAN控制器将CPU传来的信号转换为逻辑电平（即逻辑0-显性电平或者逻辑1-隐性电平）。CAN发射器接收逻辑电平之后，再将其转换为差分电平输出到CAN总线上。

接收过程：
CAN接收器将CAN_H 和 CAN_L 线上传来的差分电平转换为逻辑电平输出到CAN控制器，CAN控制器再把该逻辑电平转化为相应的信号发送到CPU上。

